<script lang="ts">
import i18n from "@/lib/i18n.svelte";
import { store } from "@/lib/store.svelte";
import { openSidePanel } from "@/lib/utility.svelte";

$effect(() => {
  storage.setItem("sync:options", store.options);
});
</script>

<section>
  <label class="language">
    <svg-icon src="/img/icon/translate.svg"></svg-icon>
    <select bind:value={store.options.locale}>
      <option value={null}>
        {i18n.t({
          en: "Language",
          ja: "è¨€èª",
          "zh-cn": "è¯­è¨€",
          es: "Idioma",
          ko: "ì–¸ì–´",
        })}
      </option>
      <hr />
      {#each Object.keys(i18n.locales) as locale}
        <option value={locale}>
          {i18n.locales[locale as keyof typeof i18n.locales].label}
        </option>
      {/each}
    </select>
  </label>

  <h1>Welcome ğŸ‰</h1>

  <div class="logo">
    <img src="/img/logo-symbol.svg" alt="Logo Symbol" width="147" height="96" />
    <img src="/img/logo-type.svg" alt="Figma Finder" width="512" height="104" />
  </div>

  <p>
    {@html i18n.t({
      en: "Thank you for installing!<br>This page can be checked from the help at any time.",
      ja: "ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚<br>ã“ã®ãƒšãƒ¼ã‚¸ã¯ã„ã¤ã§ã‚‚ãƒ˜ãƒ«ãƒ—ã‹ã‚‰ç¢ºèªã§ãã¾ã™ã€‚",
      "zh-cn": "æ„Ÿè°¢æ‚¨çš„å®‰è£…ï¼<br>æ­¤é¡µé¢å¯ä»¥éšæ—¶ä»å¸®åŠ©ä¸­æŸ¥çœ‹ã€‚",
      es: "Â¡Gracias por instalar!<br>Esta pÃ¡gina se puede consultar desde la ayuda en cualquier momento.",
      ko: "ì„¤ì¹˜í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!<br>ì´ í˜ì´ì§€ëŠ” ì–¸ì œë“ ì§€ ë„ì›€ë§ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ã€‚",
    })}
  </p>

  <button onclick={openSidePanel} class="c-button -gray">
    <svg-icon src="/img/icon/play.svg"></svg-icon>
    {i18n.t({
      en: "Run Figma Finder",
      ja: "Figma Finder ã‚’å®Ÿè¡Œ",
      "zh-cn": "è¿è¡ŒFigma Finder",
      es: "Ejecutar Figma Finder",
      ko: "Figma Finder ì‹¤í–‰",
    })}
  </button>
</section>

<style>
  section {
    display: grid;
    place-content: center;
    place-items: center;
    gap: var(--sp-m);
    margin-inline: calc(50% - 50vw);
    padding-block: var(--sp-xl);

    --bg: color-mix(in srgb, var(--color-base), var(--color-main) 3%);
    background-image: radial-gradient(
        circle farthest-side at top center,
        var(--bg) 60%,
        rgb(from var(--bg) r g b / 0.9)
      ),
      linear-gradient(transparent 96%, var(--color-main) 96%),
      linear-gradient(90deg, transparent 96%, var(--color-main) 96%);
    background-size:
      cover,
      var(--sp-s) var(--sp-s),
      var(--sp-s) var(--sp-s);
  }

  .language {
    position: absolute;
    top: 24px;
    left: 24px;
    svg-icon {
      position: absolute;
      width: 1.5rem;
      inset: 0.25rem;
      opacity: 0.4;
    }
    select {
      padding: 0.2em 0.4em;
      padding-left: 1.6rem;
      border: 2px solid rgb(from var(--color-main) r g b / 0.2);
      border-radius: 4px;
    }
  }

  .logo {
    margin-block-start: var(--sp-m);
    display: flex;
    gap: 1.5rem;
    justify-content: center;
    align-items: center;
    opacity: 0.4;
    img {
      height: 4rem;
      width: auto;
    }
  }

  p {
    text-wrap: balance;
    text-align: center;
  }
</style>
